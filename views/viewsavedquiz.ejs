<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Saved - Online Quiz Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <header class="bg-primary text-white text-center py-3">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container-fluid">
                <a class="navbar-brand" href="/home">Online Quiz Platform</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end " id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" href="/home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/quiz-create">Create Quiz</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/quiz-take">Take Quiz</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="/my-account" role="button"
                                aria-expanded="false">Profile</a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/my-account">My Account</a></li>
                                <li><a class="dropdown-item" href="/result">Results</a></li>
                                <li><a class="dropdown-item"  href="/viewsavedquiz">ViewSavedquizzes</a></li>
                                <li><a class="dropdown-item" id="logout-link" href="/">Logout</a></li>
                               
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container mt-5">
        <div class="quizlist mt-5 border border-black-300 p-4 rounded-md">
            <ul id="saved-quizzes-list" class="mt-3"></ul>
           </div>
      
    </main>
    <footer class="footer bg-dark text-white text-center py-3">
      <div class="container">
          <p>&copy; 2024 Online Quiz Platform. All Rights Reserved.</p>
         
      </div>
  </footer>


  
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  <script src="js/scripts.js"></script>
 
  <script>
    const userId ="temp-user-55ff8w8ja"
    async function fetchQuizzes() {
      try {
        
        const response = await fetch(`http://localhost:3000/api/quizzes?userId=${userId}`); // Replace with your backend URL if different
        if (!response.ok) {
          throw new Error('Failed to fetch quizzes');
        }
        const quizzes = await response.json();
        console.log('Quizzes:', quizzes); // Log the fetched quizzes to the console or use them as needed
        return quizzes;
      } catch (error) {
        console.error('Error fetching quizzes:', error);
        // Handle error scenario (e.g., show an error message to the user)
        return null; // or throw error for further handling
      }
    }






    // function displayQuizzes(quizzes) {
    //         const savedQuizzesList = document.getElementById('saved-quizzes-list');
    //         savedQuizzesList.innerHTML = ''; // Clear any existing content

    //         if (quizzes && quizzes.length > 0) {
    //             quizzes.forEach(quiz => {
    //                 const quizItem = document.createElement('li');
    //                 quizItem.className = 'list-group-item';
    //                 quizItem.innerHTML = `
    //                     <h4>QuizTitle<h4>
    //                     <h5>${quiz['quiz-title']}</h5>
    //                     <h4>Quiz Description<h4>
    //                     <p>${quiz['quiz-description']}</p>
    //                 `;
    //                 savedQuizzesList.appendChild(quizItem);
    //             });
    //         } else {
    //             savedQuizzesList.innerHTML = '<li class="list-group-item">No quizzes available</li>';
    //         }
    //     }


    
    // // Example usage of fetchQuizzes function
    // fetchQuizzes()
    //         .then(quizzes => {
    //             if (quizzes) {
    //                 displayQuizzes(quizzes);
    //             }
    //             console.log("Quizzes fetched and displayed successfully");
    //         })
    //         .catch(error => {
    //             console.error('Failed to fetch quizzes:', error);
    //         });



//     function displayQuizzes(quizzes) {
//     const savedQuizzesList = document.getElementById('saved-quizzes-list');
//     savedQuizzesList.innerHTML = ''; // Clear any existing content

//     if (quizzes && quizzes.length > 0) {
//         quizzes.forEach((quiz, quizIndex) => {
//             const quizContainer = document.createElement('div');
//             quizContainer.className = 'quiz-container mb-4 p-3 border border-gray-300 rounded-md';
             


//             const title = document.createElement('h1');
//             title.className = 'title mb-4 text-2xl font-semibold text-gray-800 border-b pb-2 border-gray-300';
//             title.innerText = 'Quiz Title';
//             quizContainer.appendChild(title);

//             const quizTitle = document.createElement('h3');
//             quizTitle.className = 'quiz-title mb-2 text-xl font-semibold text-blue-600';
//             quizTitle.innerText = quiz['quiz-title'];
//             quizContainer.appendChild(quizTitle);




//             const quizDescription = document.createElement('p');
//             quizDescription.className = 'quiz-description mb-4 text-gray-700';
//             quizDescription.innerText = quiz['quiz-description'];
//             quizContainer.appendChild(quizDescription);






//             const questionsList = document.createElement('div');
//             questionsList.className = 'questions-list mt-3';

//             quiz.questions.forEach((question, questionIndex) => {
//                 const questionCard = document.createElement('div');
//                 questionCard.className = 'card mb-3';
//                 questionCard.id = `quiz-${quizIndex}-question-${questionIndex}`;

//                 const questionCardBody = document.createElement('div');
//                 questionCardBody.className = 'card-body';

//                 const questionTitle = document.createElement('h4');
//                 questionTitle.innerText = `Question ${questionIndex + 1}`;
//                 questionCardBody.appendChild(questionTitle);

//                 const questionTextDiv = document.createElement('div');
//                 questionTextDiv.className = 'form-group mb-3';
//                 const questionTextLabel = document.createElement('label');
//                 questionTextLabel.innerText = 'Question Text:';
//                 const questionText = document.createElement('p');
//                 questionText.innerText = question.text;
//                 questionTextDiv.appendChild(questionTextLabel);
//                 questionTextDiv.appendChild(questionText);

//                 const questionTypeDiv = document.createElement('div');
//                 questionTypeDiv.className = 'form-group mb-3';
//                 const questionTypeLabel = document.createElement('label');
//                 questionTypeLabel.innerText = 'Question Type:';
//                 const questionType = document.createElement('p');
//                 questionType.innerText = question.type.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
//                 questionTypeDiv.appendChild(questionTypeLabel);
//                 questionTypeDiv.appendChild(questionType);

//                 const optionsContainer = document.createElement('div');
//                 optionsContainer.className = 'form-group mb-3';
//                 const optionsLabel = document.createElement('label');
//                 optionsLabel.innerText = 'Options:';
//                 optionsContainer.appendChild(optionsLabel);
//                 const optionsDiv = document.createElement('div');
//                 optionsDiv.className = 'form-group';

//                 question.options.forEach((option, optionIndex) => {
//                     const optionDiv = document.createElement('div');
//                     optionDiv.className = 'mb-2';
//                     const optionText = document.createElement('p');
//                     optionText.innerText = `Option ${optionIndex + 1}: ${option}`;
//                     optionDiv.appendChild(optionText);
//                     optionsDiv.appendChild(optionDiv);
//                 });

//                 optionsContainer.appendChild(optionsDiv);

//                 questionCardBody.appendChild(questionTextDiv);
//                 questionCardBody.appendChild(questionTypeDiv);
//                 questionCardBody.appendChild(optionsContainer);
//                 questionCard.appendChild(questionCardBody);
//                 questionsList.appendChild(questionCard);
//             });

//             quizContainer.appendChild(questionsList);
//             savedQuizzesList.appendChild(quizContainer);
//         });
//     } else {
//         savedQuizzesList.innerHTML = '<li class="list-group-item">No quizzes available</li>';
//     }
// }

//       fetchQuizzes()
//     .then(quizzes => {
//         if (quizzes) {
//             displayQuizzes(quizzes);
//         }
//         console.log("Quizzes fetched and displayed successfully");
//     })
//     .catch(error => {
//         console.error('Failed to fetch quizzes:', error);
//     });




function displayQuizzes(quizzes) {
    const savedQuizzesList = document.getElementById('saved-quizzes-list');
    savedQuizzesList.innerHTML = ''; // Clear any existing content

    if (quizzes && quizzes.length > 0) {
        quizzes.forEach((quiz, quizIndex) => {
            // Create container for each quiz
            const quizContainer = document.createElement('div');
            quizContainer.className = 'quiz-container mb-4 p-3 border border-gray-300 rounded-md';

            // Create title for the quiz
            const title = document.createElement('h1');
            title.className = 'title mb-4 text-2xl font-semibold text-gray-800 border-b pb-2 border-gray-300';
            title.innerText = 'Quiz Title';
            quizContainer.appendChild(title);

            // Create quiz title element
            const quizTitle = document.createElement('h3');
            quizTitle.className = 'quiz-title mb-2 text-xl font-semibold text-blue-600';
            quizTitle.innerText = quiz['quiz-title'];
            quizContainer.appendChild(quizTitle);

            // Create quiz description element
            const quizDescription = document.createElement('p');
            quizDescription.className = 'quiz-description mb-4 text-gray-700';
            quizDescription.innerText = quiz['quiz-description'];
            quizContainer.appendChild(quizDescription);

            // Create list for questions
            const questionsList = document.createElement('div');
            questionsList.className = 'questions-list mt-3';

            // Loop through each question in the quiz
            quiz.questions.forEach((question, questionIndex) => {
                // Create card for each question
                const questionCard = document.createElement('div');
                questionCard.className = 'card mb-3';
                questionCard.id = `quiz-${quizIndex}-question-${questionIndex}`;

                // Create card body for the question
                const questionCardBody = document.createElement('div');
                questionCardBody.className = 'card-body';

                // Create title for the question
                const questionTitle = document.createElement('h4');
                questionTitle.innerText = `Question ${questionIndex + 1}`;
                questionCardBody.appendChild(questionTitle);

                // Create div for question text
                const questionTextDiv = document.createElement('div');
                questionTextDiv.className = 'form-group mb-3';
                const questionTextLabel = document.createElement('label');
                questionTextLabel.innerText = 'Question Text:';
                const questionText = document.createElement('p');
                questionText.innerText = question.text;
                questionTextDiv.appendChild(questionTextLabel);
                questionTextDiv.appendChild(questionText);

                // Create div for question type
                const questionTypeDiv = document.createElement('div');
                questionTypeDiv.className = 'form-group mb-3';
                const questionTypeLabel = document.createElement('label');
                questionTypeLabel.innerText = 'Question Type:';
                const questionType = document.createElement('p');
                questionType.innerText = question.type.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
                questionTypeDiv.appendChild(questionTypeLabel);
                questionTypeDiv.appendChild(questionType);

                // Create container for options
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'form-group mb-3';
                const optionsLabel = document.createElement('label');
                optionsLabel.innerText = 'Options:';
                optionsContainer.appendChild(optionsLabel);
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'form-group';

                // Loop through each option in the question
                question.options.forEach((option, optionIndex) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'mb-2';
                    const optionText = document.createElement('p');
                    optionText.innerText = `Option ${optionIndex + 1}: ${option}`;
                    optionDiv.appendChild(optionText);
                    optionsDiv.appendChild(optionDiv);
                });

                optionsContainer.appendChild(optionsDiv);

                // Append elements to question card body
                questionCardBody.appendChild(questionTextDiv);
                questionCardBody.appendChild(questionTypeDiv);
                questionCardBody.appendChild(optionsContainer);
                questionCard.appendChild(questionCardBody);
                questionsList.appendChild(questionCard);
            });

            // Append questions list to quiz container
            quizContainer.appendChild(questionsList);

            // Append quiz container to saved quizzes list
            savedQuizzesList.appendChild(quizContainer);
        });
    } else {
        // Display message if no quizzes are available
        savedQuizzesList.innerHTML = '<li class="list-group-item">No quizzes available</li>';
    }
}

// Fetch quizzes and display them
fetchQuizzes()
    .then(quizzes => {
        if (quizzes) {
            displayQuizzes(quizzes);
        }
        console.log("Quizzes fetched and displayed successfully");
    })
    .catch(error => {
        console.error('Failed to fetch quizzes:', error);
    });



  </script>
 


</body>

</html>
